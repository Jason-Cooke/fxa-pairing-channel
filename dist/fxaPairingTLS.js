!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fxaPairingTLS",[],e):"object"==typeof exports?exports.fxaPairingTLS=e():t.fxaPairingTLS=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){t.exports=n(16)},function(t,e){function n(t,e,n,r,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(i,a){var o=t.apply(e,r);function u(t){n(o,i,a,u,s,"next",t)}function s(t){n(o,i,a,u,s,"throw",t)}u(void 0)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(9),i=n(10);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(12);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){n(4);var r=n(11);function i(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},function(t,e,n){var r=n(13),i=n(14),a=n(15);t.exports=function(t,e){return r(t)||i(t,e)||a()}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(17),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=m;var h="suspendedStart",p="suspendedYield",l="executing",y="completed",d={},v={};v[o]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==r&&i.call(k,o)&&(v=k);var x=U.prototype=_.prototype=Object.create(v);b.prototype=x.constructor=U,U.constructor=b,U[s]=b.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,U):(t.__proto__=U,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},f.awrap=function(t){return{__await:t}},V(E.prototype),E.prototype[u]=function(){return this},f.AsyncIterator=E,f.async=function(t,e,n,r){var i=new E(m(t,e,n,r));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},V(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return u.type="throw",u.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),d}}}function m(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(t,e,n){var r=h;return function(i,a){if(r===l)throw new Error("Generator is already running");if(r===y){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=L(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=l;var s=g(t,e,n);if("normal"===s.type){if(r=n.done?y:p,s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=y,n.method="throw",n.arg=s.arg)}}}(t,n,o),a}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function _(){}function b(){}function U(){}function V(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(t){var e;this._invoke=function(n,r){function a(){return new Promise(function(e,a){!function e(n,r,a,o){var u=g(t[n],t,r);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){s.value=t,a(s)},function(t){return e("throw",t,a,o)})}o(u.arg)}(n,r,e,a)})}return e=e?e.then(a,a):a()}}function L(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=g(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,n){"use strict";n.r(e);var r=n(5),i=n.n(r),a=n(4),o=n.n(a),u=n(7),s=n.n(u),c=n(6),f=n.n(c),h=n(8),p=n.n(h),l=n(0),y=n.n(l),d=n(1),v=n.n(d),w=n(2),k=n.n(w),x=n(3),m=n.n(x);function g(){}function _(t,e){if(!t){var n=new Error("assert failed: "+e);throw console.log(n),n}}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value must be a Uint8Array";return _(t instanceof Uint8Array,e),t}function U(t){return Array.prototype.map.call(t,function(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e}).join("")}function V(t){return _(t.length%2==0,"hexstr.length must be even"),new Uint8Array(Array.prototype.map.call(t,function(e,n){return n%2==1?t[n-1]+e:""}).filter(function(t){return!!t}).map(function(t){return parseInt(t,16)}))}function E(t){return new TextDecoder("utf-8").decode(t)}function L(t){return new TextEncoder("utf-8").encode(t)}function B(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var A=function(){function t(e){k()(this,t),b(e),this._buffer=e,this._dataview=new DataView(e.buffer,e.byteOffset,e.byteLength),this._pos=0}return m()(t,[{key:"length",value:function(){return this._buffer.byteLength}},{key:"tell",value:function(){return this._pos}},{key:"seek",value:function(t){this._pos=t,_(this._pos<=this.length(),"do not seek past end of buffer")}},{key:"incr",value:function(t){this.seek(this._pos+t)}},{key:"slice",value:function(t,e){var n=this._buffer.byteOffset+this._pos+t;return void 0===e?e=this.length()-this._pos:_(this._pos+e<=this.length(),"do not slice past end of buffer"),new Uint8Array(this._buffer.buffer,n,e)}}]),t}(),S=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"hasMoreBytes",value:function(){return this.tell()<this.length()}},{key:"readBytes",value:function(t){var e=this.slice(0,t);return this.incr(t),e}},{key:"readUint8",value:function(){var t=this._dataview.getUint8(this._pos);return this.incr(1),t}},{key:"readUint16",value:function(){var t=this._dataview.getUint16(this._pos);return this.incr(2),t}},{key:"readUint24",value:function(){var t=this._dataview.getUint16(this._pos);return t=(t<<16)+this._dataview.getUint8(this._pos+2),this.incr(3),t}},{key:"readUint32",value:function(){var t=this._dataview.getUint32(this._pos);return this.incr(4),t}},{key:"_readVector",value:function(t,e){var n=this.tell()+t,r=0;do{if(e(this,t,r))break;r+=1}while(this.tell()<n);this.tell()<n?this.seek(n):_(this.tell()===n,"read past end of vector")}},{key:"readVector8",value:function(t){var e=this.readUint8();return this._readVector(e,t)}},{key:"readVector16",value:function(t){var e=this.readUint16();return this._readVector(e,t)}},{key:"readVector24",value:function(t){var e=this.readUint24();return this._readVector(e,t)}},{key:"readVector32",value:function(t){var e=this.readUint32();return this._readVector(e,t)}},{key:"readWithLengthPrefix24",value:function(t){var e=!1;this.readVector24(function(){_(!e,"failed to read entire length-prefixed data"),e=!0,t.apply(void 0,arguments)})}},{key:"readVectorBytes8",value:function(){var t;return this.readVector8(function(e,n){t=e.readBytes(n)}),t}},{key:"readVectorBytes16",value:function(){var t;return this.readVector16(function(e,n){t=e.readBytes(n)}),t}},{key:"readVectorBytes24",value:function(){var t;return this.readVector24(function(e,n){t=e.readBytes(n)}),t}},{key:"readVectorBytes32",value:function(){var t;return this.readVector32(function(e,n){t=e.readBytes(n)}),t}}]),e}(A),O=function(t){function e(t){return k()(this,e),i()(this,o()(e).call(this,new Uint8Array(t)))}return f()(e,t),m()(e,[{key:"writeBytes",value:function(t){b(t),this._buffer.set(t,this.tell()),this.incr(t.byteLength)}},{key:"writeUint8",value:function(t){this._dataview.setUint8(this._pos,t),this.incr(1)}},{key:"writeUint16",value:function(t){this._dataview.setUint16(this._pos,t),this.incr(2)}},{key:"writeUint24",value:function(t){this._dataview.setUint16(this._pos,t>>8),this._dataview.setUint8(this._pos+2,255&t),this.incr(3)}},{key:"writeUint32",value:function(t){this._dataview.setUint32(this._pos,t),this.incr(4)}},{key:"_writeVector",value:function(t,e,n){var r=this.tell();e(0);var i=this.tell();n(this);var a=this.tell()-i;return _(a<=t,"wrote too many bytes for vector"),this.seek(r),e(a),this.incr(a),a}},{key:"writeVector8",value:function(t){return this._writeVector(Math.pow(2,8),this.writeUint8.bind(this),t)}},{key:"writeVector16",value:function(t){return this._writeVector(Math.pow(2,16),this.writeUint16.bind(this),t)}},{key:"writeVector24",value:function(t){return this._writeVector(Math.pow(2,24),this.writeUint24.bind(this),t)}},{key:"writeVector32",value:function(t){return this._writeVector(Math.pow(2,32),this.writeUint32.bind(this),t)}},{key:"writeVectorBytes8",value:function(t){return this.writeVector8(function(e){e.writeBytes(t)})}},{key:"writeVectorBytes16",value:function(t){return this.writeVector16(function(e){e.writeBytes(t)})}},{key:"writeVectorBytes24",value:function(t){return this.writeVector24(function(e){e.writeBytes(t)})}},{key:"writeVectorBytes32",value:function(t){return this.writeVector32(function(e){e.writeBytes(t)})}}]),e}(A),R=32;function T(t,e,n,r,i){return P.apply(this,arguments)}function P(){return(P=v()(y.a.mark(function t(e,n,r,i,a){var o;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new Uint8Array(i.byteLength+4))[0]=r>>24,o[1]=r>>16,o[2]=r>>8,o[3]=r,o.set(i,4),t.abrupt("return",o);case 7:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function I(t,e,n,r,i){return j.apply(this,arguments)}function j(){return(j=v()(y.a.mark(function t(e,n,r,i,a){var o;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _((((i[0]<<8|i[1])<<8|i[2])<<8|i[3])===r,"sequence number mismatch"),o=new Uint8Array(i.buffer,i.byteOffset+4,i.byteLength-4),t.abrupt("return",o);case 7:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function D(t){return H.apply(this,arguments)}function H(){return(H=v()(y.a.mark(function t(e){var n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Uint8Array(e),crypto.getRandomValues(n),t.abrupt("return",n);case 3:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var M={CLIENT_HELLO:1,SERVER_HELLO:2,FINISHED:20},N=41,K=43,z=45;function C(t){var e,n=t.readUint8(),r=t.readUint24()+t.tell();switch(n){case M.CLIENT_HELLO:e=F._read(t);break;case M.SERVER_HELLO:e=G._read(t);break;case M.FINISHED:e=Y._read(t);break;default:_(!1,"unexpected handshake message type")}return _(t.tell()===r,"failed to consume entire message"),e}var q=function(){function t(){k()(this,t)}return m()(t,[{key:"write",value:function(t){var e=this;t.writeUint8(this.TYPE_TAG),t.writeVector24(function(t){e._write(t)})}},{key:"_writeExtension",value:function(t,e,n){t.writeUint16(e),t.writeVector16(n)}}]),t}(),F=function(t){function e(t,n,r){var a;return k()(this,e),(a=i()(this,o()(e).call(this))).random=t,a.pskIds=n,a.pskBinders=r,_(32===t.byteLength,"random must be 32 bytes"),_(n.length===r.length,"incorrect number of psk binders"),a}return f()(e,t),m()(e,[{key:"_write",value:function(t){var e=this;t.writeUint16(771),t.writeBytes(this.random),t.writeVectorBytes8(new Uint8Array(0)),t.writeVector16(function(t){t.writeUint16(4865)}),t.writeVectorBytes8(new Uint8Array(1)),t.writeVector16(function(t){e._writeExtension(t,K,function(t){t.writeVector8(function(t){t.writeUint16(772)})}),e._writeExtension(t,z,function(t){t.writeVector8(function(t){t.writeUint8(0)})}),e._writeExtension(t,N,function(t){t.writeVector16(function(t){e.pskIds.forEach(function(e){t.writeVectorBytes16(e),t.writeUint32(0)})}),t.writeVector16(function(t){e.pskBinders.forEach(function(e){t.writeVectorBytes8(e)})})})})}},{key:"TYPE_TAG",get:function(){return M.CLIENT_HELLO}}],[{key:"_read",value:function(t){_(771===t.readUint16(),"unexpected legacy_version");var e=t.readBytes(32);t.readVectorBytes8();var n=!1;t.readVector16(function(t){if(4865===t.readUint16())return n=!0,!0}),_(n,"peer did not offer correct ciphersuite"),t.readVectorBytes8();var r=[],i=[];return t.readVector16(function(t){var e=t.readUint16();t.readVector16(function(t){switch(n=!1,e){case K:t.readVector8(function(t){if(772===t.readUint16())return n=!0,!0}),_(n,"client claims not to support TLS1.3");break;case z:t.readVector8(function(t){if(0===t.readUint8())return n=!0,!0}),_(n,"client claims not to support PSK_MODE_KE");break;case N:t.readVector16(function(t,e,n){var i=t.readVectorBytes16();t.readBytes(4),r.push(i)}),t.readVector16(function(t,e,n){var r=t.readVectorBytes8();_(r.byteLength>=32,"psk binder too short"),i.push(r)}),_(!t.hasMoreBytes(),"trailing data after PRE_SHARED_KEY extension");break;default:return!0}})}),new this(e,r,i)}}]),e}(q),G=function(t){function e(t,n){var r;return k()(this,e),(r=i()(this,o()(e).call(this))).random=t,r.pskIndex=n,_(32===t.byteLength,"random must be 32 bytes"),r}return f()(e,t),m()(e,[{key:"_write",value:function(t){var e=this;t.writeUint16(771),t.writeBytes(this.random),t.writeVectorBytes8(new Uint8Array(0)),t.writeUint16(4865),t.writeUint8(0),t.writeVector16(function(t){e._writeExtension(t,K,function(t){t.writeUint16(772)}),e._writeExtension(t,N,function(t){t.writeUint16(e.pskIndex)})})}},{key:"TYPE_TAG",get:function(){return M.SERVER_HELLO}}],[{key:"_read",value:function(t){_(771===t.readUint16(),"unexpected legacy_version");var e=t.readBytes(32);_(0===t.readVectorBytes8().byteLength,"illegal_parameter"),_(4865===t.readUint16(),"illegal_parameter"),_(0===t.readUint8(),"unexpected legacy_compression_methods");var n=!1;return t.readVector16(function(t){var e=t.readUint16();t.readVector16(function(t){switch(e){case K:_(772===t.readUint16(),"server does not support TLS1.3");break;case N:n=t.readUint16();break;default:_(!1,"unexpected extension in ServerHello")}})}),_(!1!==n,"server did not select a PSK"),new this(e,n)}}]),e}(q),Y=function(t){function e(t){var n;return k()(this,e),(n=i()(this,o()(e).call(this))).verifyData=t,_(t.byteLength===R,"incorrect length of verifyData"),n}return f()(e,t),m()(e,[{key:"_write",value:function(t){t.writeBytes(this.verifyData)}},{key:"TYPE_TAG",get:function(){return M.FINISHED}}],[{key:"_read",value:function(t){return new this(t.readBytes(R))}}]),e}(q),W=function(){function t(e){k()(this,t),this.conn=e}return m()(t,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"sendApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.conn._pendingApplicationData.push(e);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvApplicationData",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"not ready to receive application data");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"not expecting to receive a handhake message");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"close() not implemented yet");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),J=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"uninitialized state");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"sendApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"uninitialized state");case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"uninitialized state");case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e,n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"uninitialized state");case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(!1,"uninitialized state");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(W),Q=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.error=e;case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"sendApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw this.error;case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw this.error;case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e,n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw this.error;case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw this.error;case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(W),X=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){var e;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.conn._pendingApplicationData.length>0)){t.next=6;break}return e=this.conn._pendingApplicationData.shift(),t.next=4,this.sendApplicationData(e);case 4:t.next=0;break;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"sendApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn._writeApplicationData(e);case 2:return t.next=4,this.conn._flushOutgoingRecord();case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recvApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.slice(0));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),Z=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){var e;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new F(this.conn.randomSalt,[this.conn.pskId],[new Uint8Array(32)]),t.next=3,this.conn._writeHandshakeMessage(e);case 3:return t.next=5,this.conn._flushOutgoingRecord();case 5:return t.next=7,this.conn._transition($);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(W),$=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _(e instanceof G,"expected ServerHello"),_(0===e.pskIndex,"server did not select our offered PSK"),t.next=4,this.conn._transition(tt,e);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),tt=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn._transition(et);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(W),et=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e){var n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _(e instanceof Y,"expected Finished"),_(B(e.verifyData,new Uint8Array(R)),"invalid verifyData"),n=new Uint8Array(R),t.next=5,this.conn._writeHandshakeMessage(new Y(n));case 5:return t.next=7,this.conn._flushOutgoingRecord();case 7:return this.conn._updateTrafficKeys(),t.next=10,this.conn._transition(X);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),nt=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _(e instanceof F,"expected ClientHello"),t.next=3,this.conn._transition(rt,e);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),rt=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(e){var n,r=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pskIds.findIndex(function(t){return B(t,r.conn.pskId)}),console.log("HERE!",this.conn.pskId,n),_(-1!==n,"client did not offer a matching PSK"),_(B(e.pskBinders[n],new Uint8Array(32))),t.next=7,this.conn._transition(it,n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),it=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(e){var n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn._writeHandshakeMessage(new G(this.conn.randomSalt,e));case 2:return n=new Uint8Array(R),t.next=5,this.conn._writeHandshakeMessage(new Y(n));case 5:return t.next=7,this.conn._flushOutgoingRecord();case 7:return t.next=9,this.conn._transition(at);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),at=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"initialize",value:function(){var t=v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn._transition(ot);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(W),ot=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,[{key:"recvHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _(e instanceof Y,"expected Finished"),_(B(e.verifyData,new Uint8Array(R)),"invalid verify_data"),this.conn._updateTrafficKeys(),t.next=5,this.conn._transition(X);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(W),ut={21:"ALERT",22:"HANDSHAKE",23:"APPLICATION_DATA"},st=21,ct=22,ft=23,ht=Math.pow(2,32),pt=Math.pow(2,14),lt=pt+256,yt=lt+5,dt=function(){function t(){k()(this,t),this.contentKey=null,this.contentIV=null,this.sequenceNumber=0}return m()(t,[{key:"setContentKey",value:function(t,e){b(t),b(e),this.contentKey=t,this.contentIV=e,this.sequenceNumber=0}},{key:"recv",value:function(){var t=v()(y.a.mark(function t(e){var n,r,i,a,o,u,s,c;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new S(e),_((r=n.readUint8())in ut,"unrecognized record type"),_(771===n.readUint16(),"unexpected legacy_record_version"),i=n.readUint16(),null!==this.contentKey){t.next=11;break}_(r!==ft,"must encrypt application data"),_(i<pt,"record_overflow"),a=n.readBytes(i),t.next=28;break;case 11:return _(i<lt,"record_overflow"),_(r===ft,"outer opaque_type should always be application data"),o=n.slice(-5,5),u=n.readBytes(i),t.next=17,this._decrypt(u,o);case 17:s=t.sent,c=s.byteLength-1;case 19:if(!(c>=0)){t.next=25;break}if(0===s[c]){t.next=22;break}return t.abrupt("break",25);case 22:c--,t.next=19;break;case 25:_(c>=0,"failed to find content-type byte in TLSInnerPlaintext"),r=s[c],a=new Uint8Array(s.buffer,s.byteOffset,c);case 28:return _(!n.hasMoreBytes(),"record contained trailing data"),t.abrupt("return",[r,new S(a)]);case 30:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_decrypt",value:function(){var t=v()(y.a.mark(function t(e,n){var r;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(this.contentKey,this.contentIV,this.sequenceNumber,e,n);case 2:return r=t.sent,this.sequenceNumber+=1,_(this.sequenceNumber<ht,"sequence number overflow"),t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),vt=function(){function t(){k()(this,t),this.contentKey=null,this.contentIV=null,this.sequenceNumber=0,this._pendingRecordType=0,this._pendingRecordBuf=null}return m()(t,[{key:"setContentKey",value:function(t,e){b(t),b(e),this.contentKey=t,this.contentIV=e,this.sequenceNumber=0}},{key:"withBufferWriter",value:function(){var t=v()(y.a.mark(function t(e,n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null===this._pendingRecordBuf?(this._pendingRecordType=e,this._pendingRecordBuf=new O(yt),this._pendingRecordBuf.seek(5)):_(this._pendingRecordType===e,"different record type already in progress"),t.next=3,n(this._pendingRecordBuf);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"flush",value:function(){var t=v()(y.a.mark(function t(){var e,n,r,i,a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._pendingRecordBuf,n=this._pendingRecordType,this._pendingRecordBuf=null,_(null!==n,"no messages written to buffer"),r=e.tell()-5,null!==this.contentKey){t.next=13;break}_(n!==ft,"must encrypt application data"),e.seek(0),e.writeUint8(n),e.writeUint16(771),e.writeUint16(r),t.next=26;break;case 13:return e.writeUint8(n),r+=1,e.seek(0),e.writeUint8(ft),e.writeUint16(771),e.writeUint16(r+4),i=e.slice(-5,5),t.next=22,this._encrypt(e.slice(0,r),i);case 22:a=t.sent,r+=4,_(a.byteLength===r,"unexpected ciphertext length"),e.writeBytes(a);case 26:return e.seek(0),t.abrupt("return",e.slice(0,r+5));case 28:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_encrypt",value:function(){var t=v()(y.a.mark(function t(e,n){var r;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(this.contentKey,this.contentIV,this.sequenceNumber,e,n);case 2:return r=t.sent,this.sequenceNumber+=1,_(this.sequenceNumber<ht,"sequence number overflow"),t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),t}();n.d(e,"InsecureClientConnection",function(){return kt}),n.d(e,"InsecureServerConnection",function(){return xt}),n.d(e,"bytesToHex",function(){return U}),n.d(e,"hexToBytes",function(){return V}),n.d(e,"bytesToUtf8",function(){return E}),n.d(e,"utf8ToBytes",function(){return L});var wt=function(){function t(e,n,r,i){k()(this,t),this.psk=b(e),this.pskId=b(n),this.sendCallback=r,this.randomSalt=i,this._state=new J(this),this._pendingApplicationData=[],this._recordSender=new vt,this._recordReceiver=new dt,this._lastPromise=Promise.resolve()}return m()(t,[{key:"send",value:function(){var t=v()(y.a.mark(function t(e){var n=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b(e),t.next=3,this._synchronized(v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._state.sendApplicationData(e);case 2:case"end":return t.stop()}},t,this)})));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"recv",value:function(){var t=v()(y.a.mark(function t(e){var n=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b(e),t.next=3,this._synchronized(v()(y.a.mark(function t(){var r,i,a,o;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._recordReceiver.recv(e);case 2:return r=t.sent,i=p()(r,2),a=i[0],o=i[1],t.next=8,n._dispatchIncomingRecord(a,o);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},t,this)})));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=v()(y.a.mark(function t(){var e=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._synchronized(v()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._state.close();case 2:case"end":return t.stop()}},t,this)})));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_synchronized",value:function(t){var e=this,n=this._lastPromise.then(function(){return t()}).catch(function(){var t=v()(y.a.mark(function t(n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._transition(Q,n);case 2:throw n;case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());return this._lastPromise=n.then(g,g),n}},{key:"_transition",value:function(){var t=v()(y.a.mark(function t(e){var n,r,i,a,o=arguments;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this._state=new e(this),r=o.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=o[a];return t.next=4,(n=this._state).initialize.apply(n,i);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_writeApplicationData",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._recordSender.withBufferWriter(ft,function(){var t=v()(y.a.mark(function t(n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.writeBytes(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_writeHandshakeMessage",value:function(){var t=v()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._recordSender.withBufferWriter(ct,function(){var t=v()(y.a.mark(function t(n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.write(n);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_flushOutgoingRecord",value:function(){var t=v()(y.a.mark(function t(){var e;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._recordSender.flush();case 2:return e=t.sent,t.next=5,this.sendCallback(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_dispatchIncomingRecord",value:function(){var t=v()(y.a.mark(function t(e,n){var r;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===st?3:t.t0===ft?4:t.t0===ct?7:12;break;case 3:throw new Error("received TLS alert record, aborting!");case 4:return t.next=6,this._state.recvApplicationData(n);case 6:return t.abrupt("return",t.sent);case 7:return r=C(n),t.next=10,this._state.recvHandshakeMessage(r);case 10:if(n.hasMoreBytes()){t.next=7;break}case 11:return t.abrupt("return",null);case 12:_(!1,"unknown record type: ".concat(e));case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_updateTrafficKeys",value:function(){this._recordSender.setContentKey(this.psk,new Uint8Array(32)),this._recordReceiver.setContentKey(this.psk,new Uint8Array(32))}}],[{key:"create",value:function(){var t=v()(y.a.mark(function t(e,n,r){var i,a=arguments;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(i=a.length>3&&void 0!==a[3]?a[3]:null)){t.next=7;break}return t.next=4,D(32);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=i;case 8:return i=t.t0,t.abrupt("return",new this(e,n,r,i));case 10:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),kt=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,null,[{key:"create",value:function(){var t=v()(y.a.mark(function t(n,r,i){var a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s()(o()(e),"create",this).call(this,n,r,i);case 2:return a=t.sent,t.next=5,a._transition(Z);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(wt),xt=function(t){function e(){return k()(this,e),i()(this,o()(e).apply(this,arguments))}return f()(e,t),m()(e,null,[{key:"create",value:function(){var t=v()(y.a.mark(function t(n,r,i){var a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s()(o()(e),"create",this).call(this,n,r,i);case 2:return a=t.sent,t.next=5,a._transition(nt);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(wt)}])});